<ion-header class="ion-no-border">
  <ion-toolbar style="--background: transparent;">
    <ion-buttons slot="start">
      <ion-back-button defaultHref="/home" color="light" text="Atrás"></ion-back-button>
    </ion-buttons>
    <ion-title style="font-family: 'Cinzel', serif; color: #d4af37; font-size: 1rem; letter-spacing: 2px;">
      GRIMORIO DE RITUALES
    </ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  
  <div class="stars-bg"></div>

  <div class="main-container ion-padding">
    
    <p class="intro-text">✦ Elige tu intención mágica ✦</p>

    <div class="ritual-grid">
      
      <div class="ritual-item" 
           *ngFor="let cat of categorias" 
           (click)="abrirCategoria(cat)"
           [ngClass]="cat.color">
        
        <div class="icon-circle">
          <ion-icon [name]="cat.icono"></ion-icon>
        </div>
        
        <span class="ritual-name">{{ cat.nombre }}</span>
      </div>

    </div>

    <ion-modal [isOpen]="isModalOpen" (didDismiss)="cerrarModal()" class="ritual-modal">
      <ng-template>
        
        <ion-header class="ion-no-border">
          <ion-toolbar style="--background: #1a1a1a;">
            <ion-title style="font-family: 'Cinzel', serif; color: #d4af37;">
              {{ categoriaSeleccionada?.nombre }}
            </ion-title>
            <ion-buttons slot="end">
              <ion-button (click)="cerrarModal()" color="light">
                <ion-icon name="close"></ion-icon>
              </ion-button>
            </ion-buttons>
          </ion-toolbar>
        </ion-header>

        <ion-content class="modal-content">
          <div class="spells-container ion-padding">
            
            <div *ngFor="let hechizo of categoriaSeleccionada?.hechizos" class="spell-card">
              <div class="spell-header">
                <ion-icon name="sparkles" class="spell-icon"></ion-icon>
                <h3 class="spell-title">{{ hechizo.titulo }}</h3>
              </div>
              
              <span class="section-label">Ingredientes:</span>
              <p class="spell-text">{{ hechizo.materiales }}</p>

              <span class="section-label">Proceso:</span>
              <p class="spell-text">{{ hechizo.proceso }}</p>

              <span class="section-label">Ritual:</span>
              <p class="spell-text italic">"{{ hechizo.ritual }}"</p>
            </div>

            <div *ngIf="categoriaSeleccionada?.hechizos.length === 0" class="empty-state">
              <p>Aún no has escrito rituales para esto.</p>
            </div>

          </div>
        </ion-content>

      </ng-template>
    </ion-modal>

  </div>
</ion-content>