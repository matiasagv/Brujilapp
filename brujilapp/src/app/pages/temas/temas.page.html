<ion-header class="ion-no-border">
  <ion-toolbar style="--background: transparent;">
    <ion-buttons slot="start">
      <ion-back-button defaultHref="/home" color="light"></ion-back-button>
    </ion-buttons>
    <ion-title style="font-family: 'Cinzel', serif; color: #e0d1ff; font-size: 0.9rem;">
      BIBLIOTECA TAROT
    </ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <div class="main-container ion-padding">

    <ion-segment (ionChange)="cambiarSegmento($event)" [value]="segmentoActual" mode="ios" class="magic-segment">
      <ion-segment-button value="mayores">
        <ion-label>Arcanos Mayores</ion-label>
      </ion-segment-button>
      <ion-segment-button value="menores">
        <ion-label>Arcanos Menores</ion-label>
      </ion-segment-button>
    </ion-segment>

    <div class="cards-grid">
      
      <ng-container *ngIf="segmentoActual === 'mayores'">
        <div class="tarot-card-text" *ngFor="let carta of arcanosMayores" (click)="abrirDetalle(carta)">
          <div class="card-header">
            <span class="roman-num">{{ carta.romano }}</span>
          </div>
          <div class="card-body">
            <h3 class="card-name">{{ carta.nombre }}</h3>
            <div class="separator"></div>
            <p class="card-keyword">{{ carta.palabra }}</p>
          </div>
        </div>
      </ng-container>

      <ng-container *ngIf="segmentoActual === 'menores'">
        <div class="tarot-card-text minor" *ngFor="let carta of arcanosMenores" (click)="abrirDetalle(carta)">
          <div class="card-header-minor">
            <span class="suit-name">{{ carta.palo }}</span>
          </div>
          <div class="card-body">
            <h3 class="card-name">{{ carta.nombre }}</h3>
            <div class="separator"></div>
            <p class="card-keyword">{{ carta.palabra }}</p>
          </div>
        </div>
      </ng-container>

    </div>

    <ion-modal [isOpen]="isModalOpen" (didDismiss)="cerrarModal()" class="card-modal">
      <ng-template>
        <ion-header class="ion-no-border">
          <ion-toolbar style="--background: #1a1a1a;">
            <ion-title class="modal-header-title">{{ cartaSeleccionada?.nombre }}</ion-title>
            <ion-buttons slot="end">
              <ion-button (click)="cerrarModal()" color="light">
                <ion-icon name="close"></ion-icon>
              </ion-button>
            </ion-buttons>
          </ion-toolbar>
        </ion-header>
        
        <ion-content class="modal-content">
          <div class="detail-container ion-padding">
            
            <div class="hero-number-container">
              <span *ngIf="cartaSeleccionada?.romano" class="hero-roman">{{ cartaSeleccionada.romano }}</span>
              <span *ngIf="!cartaSeleccionada?.romano" class="hero-icon">ðŸ”®</span>
            </div>

            <div class="story-section">
              <div class="section-label">âœ¦ LA ESENCIA âœ¦</div>
              <p class="story-text">
                "{{ cartaSeleccionada?.historia }}"
              </p>
            </div>

            <div class="meaning-box upright">
              <h3><ion-icon name="arrow-up-circle"></ion-icon> Al Derecho</h3>
              <p>{{ cartaSeleccionada?.derecho }}</p>
            </div>

            <div class="meaning-box reversed">
              <h3><ion-icon name="arrow-down-circle"></ion-icon> Invertida</h3>
              <p>{{ cartaSeleccionada?.reves }}</p>
            </div>

          </div>
        </ion-content>
      </ng-template>
    </ion-modal>

  </div>
</ion-content>